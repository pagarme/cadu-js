{"version":3,"sources":["webpack:///webpack/bootstrap 0d96d37aca595a2f18c8","webpack:///./client.js","webpack:///external \"mappersmith/middlewares/encode-json\"","webpack:///./middlewares/header-auth-panda.js","webpack:///./middlewares/utils/build-get-jwt.js","webpack:///external \"jsonwebtoken\"","webpack:///external \"moment\"","webpack:///external \"uuid\"","webpack:///external \"axios\"","webpack:///external \"url\"","webpack:///external \"ramda\"","webpack:///external \"mappersmith\"","webpack:///./routes/index.js","webpack:///./routes/member/index.js","webpack:///./routes/member/contact.js","webpack:///./routes/member/bank-account.js","webpack:///./routes/member/email.js","webpack:///./routes/member/address.js","webpack:///./routes/member/partner.js","webpack:///./routes/member/phone.js","webpack:///./routes/others/country.js","webpack:///./routes/others/economic-activities.js","webpack:///./routes/risk/analysis.js","webpack:///./routes/kyc-proxy/analysis.js","webpack:///./adapters/index.js","webpack:///./adapters/pagarme/recipient.js","webpack:///./adapters/pagarme/bank-account.js","webpack:///./adapters/pagarme/address.js","webpack:///./adapters/pagarme/risk-analysis.js","webpack:///./validations/client.js","webpack:///external \"joi\"","webpack:///external \"bluebird\""],"names":["require","encodeJson","default","headerAuthPandaMiddleware","buildGetJwtToken","forge","configs","always","equals","ifElse","assoc","memberRoutes","contactRoutes","bankAccountRoutes","emailRoutes","addressRoutes","partnerRoutes","phoneRoutes","countryRoutes","economicActivitiesRoutes","analysisRoutes","kycProxyAnalysisRoutes","adapters","validateConfig","validateConnectConfig","Promise","maxMiddlewareStackExecutionAllowed","chooseHost","chooseHostKycProxy","connect","config","environment","privateKey","clientId","userAgent","getJwtToken","AuthorizationTokenHeader","library","middlewares","host","resources","Member","Contact","BankAccount","Email","Address","Partner","Phone","Country","EconomicActivity","Analysis","connectKycProxy","module","exports","handleAuthorizationToken","then","jwtToken","request","resolve","token","headers","Authorization","value","enhance","response","next","renew","catch","status","jwt","moment","uuidv4","v4","axios","url","chooseAudValueEndpoint","chooseRequestTokenEndpoint","getToken","isTokenValid","expirationDate","unix","now","payload","exp","nbf","aud","realm","sub","jti","iat","iss","internalToken","sign","algorithm","tokenPayload","client_id","grant_type","client_assertion","client_assertion_type","endpoint","params","URLSearchParams","post","method","data","access_token","errorResponse","Error","error","memberAPI","all","path","byId","create","update","remove","countryAPI","list","listSubDivisions","subDivisionById","listCities","cityById","economicActivitioesAPI","riskAPI","pagarmeRecipientAdapter","pagarmeBankAccountAdapter","pagarmeAddressAdapter","pagarmeRiskAnalysisAdapter","pagarme","address","bankAccount","recipient","riskAnalysis","bankAccountAdapter","addressAdapter","anyPass","applySpec","complement","evolve","filter","has","isEmpty","isNil","of","pathEq","pathSatisfies","propEq","pipe","prop","reject","replace","uniq","__","isNotNil","pathIsNotNil","hasTradingName","isIndividual","legalNameCompany","tradeNameCompany","legalName","tradeName","documentTypeCode","personCode","taxId","formatedBirthDate","register","register_information","birthdate","format","bankAccounts","hasAddress","getAddresses","addressesArray","addresses","main_address","push","map","notEmpty","filterNotNil","filterNotEmpty","maxLegalOrTradeNameLength","truncateName","name","substring","legalPersonalityId","taxIdTypeId","motherName","websiteUrl","rejectNullOrEmpty","caduUnsafeCharsReg","replaceUnsafeChars","parseRecipient","getAccountTypeId","adapter","countryId","bankId","branchCode","branchCodeCheckDigit","accountNumber","accountNumberCheckDigit","statusId","accountTypeId","is","slice","trim","when","isString","String","propAndTrim","propName","isEmptyOrNil","emptyStreetNumber","entranceNumber","typeId","streetName","neighborhood","postalCode","cityName","countrySubdivisionCode","recipientAdapter","cond","propOr","T","getPolicyId","createPolicy","id","forceReanalysis","serviceAgreements","products","providerId","addServiceAgreements","policies","member","pluck","Joi","configSchema","object","keys","secret","string","required","valid","clientApplicationKey","userIdentifier","connectConfigSchema","result","validate","details"],"mappings":"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","file":"cadu.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0d96d37aca595a2f18c8\n **/","const { default: encodeJson } = require('mappersmith/middlewares/encode-json')\nconst headerAuthPandaMiddleware = require('./middlewares/header-auth-panda')\nconst buildGetJwtToken = require('./middlewares/utils/build-get-jwt')\nconst forge = require('mappersmith').default\nconst { configs } = require('mappersmith')\n\nconst {\n  always,\n  equals,\n  ifElse,\n  assoc,\n} = require('ramda')\n\nconst {\n  memberRoutes,\n  contactRoutes,\n  bankAccountRoutes,\n  emailRoutes,\n  addressRoutes,\n  partnerRoutes,\n  phoneRoutes,\n  countryRoutes,\n  economicActivitiesRoutes,\n  analysisRoutes,\n  kycProxyAnalysisRoutes,\n} = require('./routes')\n\nconst adapters = require('./adapters')\n\nconst {\n  validateConfig,\n  validateConnectConfig,\n} = require('./validations/client')\n\nconfigs.Promise = require('bluebird')\n\nconfigs.maxMiddlewareStackExecutionAllowed = 2\n\nconst chooseHost = ifElse(\n  equals('live'),\n  always('https://api-cadu.stone.com.br'),\n  always('https://api-staging-cadu.stone.com.br')\n)\n\nconst chooseHostKycProxy = ifElse(\n  equals('live'),\n  always('https://kyc-proxy.risco.pagar.me'),\n  always('https://kyc-proxy.stg.risco.pagar.me')\n)\n\nconst connect = (config = {}) => {\n  validateConnectConfig(config)\n\n  const {\n    environment,\n    privateKey,\n    clientId,\n    userAgent,\n  } = config\n\n  const getJwtToken = buildGetJwtToken({\n    environment,\n    privateKey,\n    clientId,\n    userAgent,\n  })\n\n  const AuthorizationTokenHeader = headerAuthPandaMiddleware(getJwtToken)\n\n  const library = forge({\n    middlewares: [\n      AuthorizationTokenHeader,\n      encodeJson,\n    ],\n    host: chooseHost(environment),\n    resources: {\n      Member: memberRoutes,\n      Contact: contactRoutes,\n      BankAccount: bankAccountRoutes,\n      Email: emailRoutes,\n      Address: addressRoutes,\n      Partner: partnerRoutes,\n      Phone: phoneRoutes,\n      Country: countryRoutes,\n      EconomicActivity: economicActivitiesRoutes,\n      Analysis: analysisRoutes,\n    },\n  })\n\n  return assoc('adapters', adapters, library)\n}\n\nconst connectKycProxy = (config = {}) => {\n  validateConfig(config)\n\n  const {\n    environment,\n    privateKey,\n    clientId,\n    userAgent,\n  } = config\n\n  const getJwtToken = buildGetJwtToken({\n    environment,\n    privateKey,\n    clientId,\n    userAgent,\n  })\n\n  const AuthorizationTokenHeader = headerAuthPandaMiddleware(getJwtToken)\n\n  const library = forge({\n    middlewares: [\n      AuthorizationTokenHeader,\n      encodeJson,\n    ],\n    host: chooseHostKycProxy(environment),\n    resources: {\n      Analysis: kycProxyAnalysisRoutes,\n    },\n  })\n\n  return assoc('adapters', adapters, library)\n}\n\nmodule.exports = {\n  connectKycProxy,\n  connect,\n  adapters,\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./client.js\n **/","module.exports = require(\"mappersmith/middlewares/encode-json\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"mappersmith/middlewares/encode-json\"\n ** module id = 1\n ** module chunks = 0\n **/","const handleAuthorizationToken = getJwtToken => getJwtToken()\n  .then(jwtToken => jwtToken)\n\nconst headerAuthPandaMiddleware = getJwtToken => () => ({\n  request (request) {\n    return Promise\n      .resolve(handleAuthorizationToken(getJwtToken))\n      .then((token) => {\n        const headers = {\n          Authorization: `Bearer ${token.value}`,\n        }\n\n        return request.enhance({ headers })\n      })\n  },\n\n  response (next, renew) {\n    return next().catch((response) => {\n      if (response.status() === 401) {\n        return renew()\n      }\n\n      return next()\n    })\n  },\n})\n\nmodule.exports = headerAuthPandaMiddleware\n\n\n\n/** WEBPACK FOOTER **\n ** ./middlewares/header-auth-panda.js\n **/","const jwt = require('jsonwebtoken')\nconst moment = require('moment')\nconst { v4: uuidv4 } = require('uuid')\nconst axios = require('axios')\nconst url = require('url')\nconst {\n  always,\n  equals,\n  ifElse,\n} = require('ramda')\n\nconst buildGetJwtToken = (\n  {\n    environment,\n    privateKey,\n    clientId,\n    userAgent,\n  },\n  token = {}\n) => {\n  let jwtToken = token\n\n  const chooseAudValueEndpoint = ifElse(\n    equals('live'),\n    always('https://accounts.openbank.stone.com.br/auth/realms/stone_bank'),\n    always('https://sandbox-accounts.openbank.stone.com.br/auth/realms/stone_bank')\n  )\n\n  const chooseRequestTokenEndpoint = ifElse(\n    equals('live'),\n    always('https://accounts.openbank.stone.com.br/auth/realms/stone_bank/protocol/openid-connect/token'),\n    always('https://sandbox-accounts.openbank.stone.com.br/auth/realms/stone_bank/protocol/openid-connect/token')\n  )\n\n  const getToken = () => {\n    const isTokenValid = jwtToken\n    && jwtToken.value\n    && jwtToken.expirationDate\n    && jwtToken.expirationDate >= moment().unix()\n\n    if (isTokenValid) {\n      return Promise.resolve(jwtToken)\n    }\n\n    const now = moment().unix()\n    const expirationDate = now + (15 * 60)\n\n    const payload = {\n      exp: expirationDate,\n      nbf: now,\n      aud: chooseAudValueEndpoint(environment),\n      realm: 'stone_bank',\n      sub: clientId,\n      clientId,\n      jti: uuidv4(),\n      iat: now,\n      iss: clientId,\n    }\n\n    try {\n      const internalToken = jwt.sign(payload, privateKey, { algorithm: 'RS256' })\n\n      const tokenPayload = {\n        client_id: clientId,\n        grant_type: 'client_credentials',\n        client_assertion: internalToken,\n        client_assertion_type: 'urn:ietf:params:oauth:client-assertion-type:jwt-bearer',\n      }\n\n      const endpoint = chooseRequestTokenEndpoint(environment)\n      const params = new url.URLSearchParams(tokenPayload)\n\n      return axios.post(\n        endpoint,\n        params,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'User-Agent': userAgent,\n          },\n        }\n      ).then((response) => {\n        jwtToken = {\n          value: response.data.access_token,\n          expirationDate,\n        }\n        return jwtToken\n      }).catch((errorResponse) => {\n        throw new Error(`Unsuccessful request - ${errorResponse}`)\n      })\n    } catch (error) {\n      throw new Error(`Could not generate new token - ${error}`)\n    }\n  }\n\n  return getToken\n}\n\nmodule.exports = buildGetJwtToken\n\n\n\n/** WEBPACK FOOTER **\n ** ./middlewares/utils/build-get-jwt.js\n **/","module.exports = require(\"jsonwebtoken\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jsonwebtoken\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = require(\"moment\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"moment\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = require(\"uuid\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"uuid\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = require(\"axios\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"axios\"\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = require(\"url\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"url\"\n ** module id = 8\n ** module chunks = 0\n **/","module.exports = require(\"ramda\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ramda\"\n ** module id = 9\n ** module chunks = 0\n **/","module.exports = require(\"mappersmith\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"mappersmith\"\n ** module id = 10\n ** module chunks = 0\n **/","const memberRoutes = require('./member')\nconst contactRoutes = require('./member/contact')\nconst bankAccountRoutes = require('./member/bank-account')\nconst emailRoutes = require('./member/email')\nconst addressRoutes = require('./member/address')\nconst partnerRoutes = require('./member/partner')\nconst phoneRoutes = require('./member/phone')\nconst countryRoutes = require('./others/country')\nconst economicActivitiesRoutes = require('./others/economic-activities')\nconst analysisRoutes = require('./risk/analysis')\nconst kycProxyAnalysisRoutes = require('./kyc-proxy/analysis')\n\nmodule.exports = {\n  memberRoutes,\n  contactRoutes,\n  bankAccountRoutes,\n  emailRoutes,\n  addressRoutes,\n  partnerRoutes,\n  phoneRoutes,\n  countryRoutes,\n  economicActivitiesRoutes,\n  analysisRoutes,\n  kycProxyAnalysisRoutes,\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./routes/index.js\n **/","const memberAPI = '/membership/v1/members'\n\nmodule.exports = {\n  all: {\n    method: 'get',\n    path: memberAPI,\n  },\n\n  byId: {\n    method: 'get',\n    path: `${memberAPI}/{memberKey}`,\n  },\n\n  create: {\n    method: 'post',\n    path: memberAPI,\n  },\n\n  update: {\n    method: 'put',\n    path: `${memberAPI}/{memberKey}`,\n  },\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./routes/member/index.js\n **/","const memberAPI = '/membership/v1/members'\n\nmodule.exports = {\n  all: {\n    method: 'get',\n    path: `${memberAPI}/{memberKey}/contacts`,\n  },\n\n  byId: {\n    method: 'get',\n    path: `${memberAPI}/{memberKey}/contacts/{contactKey}`,\n  },\n\n  create: {\n    method: 'post',\n    path: `${memberAPI}/{memberKey}/contacts`,\n  },\n\n  update: {\n    method: 'put',\n    path: `${memberAPI}/{memberKey}/contacts/{contactKey}`,\n  },\n\n  remove: {\n    method: 'delete',\n    path: `${memberAPI}/{memberKey}/contacts/{contactKey}`,\n  },\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./routes/member/contact.js\n **/","const memberAPI = '/membership/v1/members'\n\nmodule.exports = {\n  all: {\n    method: 'get',\n    path: `${memberAPI}/{memberKey}/bankaccounts`,\n  },\n\n  byId: {\n    method: 'get',\n    path: `${memberAPI}/{memberKey}/bankaccounts/{bankAccountKey}`,\n  },\n\n  create: {\n    method: 'post',\n    path: `${memberAPI}/{memberKey}/bankaccounts`,\n  },\n\n  update: {\n    method: 'put',\n    path: `${memberAPI}/{memberKey}/bankaccounts/{bankAccountKey}`,\n  },\n\n  remove: {\n    method: 'delete',\n    path: `${memberAPI}/{memberKey}/bankaccounts/{bankAccountKey}`,\n  },\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./routes/member/bank-account.js\n **/","const memberAPI = '/membership/v1/members'\n\nmodule.exports = {\n  all: {\n    method: 'get',\n    path: `${memberAPI}/{memberKey}/contacts/{contactKey}/emails`,\n  },\n  byId: {\n    method: 'get',\n    path: `${memberAPI}/{memberKey}/contacts/{contactKey}/emails/{emailKey}`,\n  },\n\n  create: {\n    method: 'post',\n    path: `${memberAPI}/{memberKey}/contacts/{contactKey}/emails`,\n  },\n\n  update: {\n    method: 'put',\n    path: `${memberAPI}/{memberKey}/contacts/{contactKey}/emails/{emailKey}`,\n  },\n\n  remove: {\n    method: 'delete',\n    path: `${memberAPI}/{memberKey}/contacts/{contactKey}/emails/{emailKey}`,\n  },\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./routes/member/email.js\n **/","const memberAPI = '/membership/v1/members'\n\nmodule.exports = {\n  all: {\n    method: 'get',\n    path: `${memberAPI}/{memberKey}/addresses`,\n  },\n\n  byId: {\n    method: 'get',\n    path: `${memberAPI}/{memberKey}/addresses/{addressKey}`,\n  },\n\n  create: {\n    method: 'post',\n    path: `${memberAPI}/{memberKey}/addresses`,\n  },\n\n  update: {\n    method: 'put',\n    path: `${memberAPI}/{memberKey}/addresses/{addressKey}`,\n  },\n\n  remove: {\n    method: 'delete',\n    path: `${memberAPI}/{memberKey}/addresses/{addressKey}`,\n  },\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./routes/member/address.js\n **/","const memberAPI = '/membership/v1/members'\n\nmodule.exports = {\n  all: {\n    method: 'get',\n    path: `${memberAPI}/{memberKey}/partners`,\n  },\n\n  byId: {\n    method: 'get',\n    path: `${memberAPI}/{memberKey}/partners/{partnerKey}`,\n  },\n\n  create: {\n    method: 'post',\n    path: `${memberAPI}/{memberKey}/partners`,\n  },\n\n  update: {\n    method: 'put',\n    path: `${memberAPI}/{memberKey}/partners/{partnerKey}`,\n  },\n\n  remove: {\n    method: 'delete',\n    path: `${memberAPI}/{memberKey}/partners/{partnerKey}`,\n  },\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./routes/member/partner.js\n **/","const memberAPI = '/membership/v1/members'\n\nmodule.exports = {\n  all: {\n    method: 'get',\n    path: `${memberAPI}/{memberKey}/contacts/{contactKey}/phones`,\n  },\n\n  byId: {\n    method: 'get',\n    path: `${memberAPI}/{memberKey}/contacts/{contactKey}/phones/{phoneKey}`,\n  },\n\n  create: {\n    method: 'post',\n    path: `${memberAPI}/{memberKey}/contacts/{contactKey}/phones`,\n  },\n\n  update: {\n    method: 'put',\n    path: `${memberAPI}/{memberKey}/contacts/{contactKey}/phones/{phoneKey}`,\n  },\n\n  remove: {\n    method: 'delete',\n    path: `${memberAPI}/{memberKey}/contacts/{contactKey}/phones/{phoneKey}`,\n  },\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./routes/member/phone.js\n **/","const countryAPI = '/membership/v1/countries'\n\nmodule.exports = {\n  list: {\n    method: 'get',\n    path: countryAPI,\n  },\n\n  byId: {\n    method: 'get',\n    path: `${countryAPI}/{countryCode}`,\n  },\n\n  listSubDivisions: {\n    method: 'get',\n    path: `${countryAPI}/{countryCode}/subdivisions`,\n  },\n\n  subDivisionById: {\n    method: 'get',\n    path: `${countryAPI}/{countryCode}/subdivisions/{subDivisionCode}`,\n  },\n\n  listCities: {\n    method: 'get',\n    path: `${countryAPI}/{countryCode}/subdivisions/{subDivisionCode}/cities`,\n  },\n\n  cityById: {\n    method: 'get',\n    path: `${countryAPI}/{countryCode}/subdivisions/{subDivisionCode}/cities/{cityCode}`,\n  },\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./routes/others/country.js\n **/","const economicActivitioesAPI = '/membership/v1/economicactivities'\n\nmodule.exports = {\n  all: {\n    method: 'get',\n    path: economicActivitioesAPI,\n  },\n\n  byId: {\n    method: 'get',\n    path: `${economicActivitioesAPI}/{key}`,\n  },\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./routes/others/economic-activities.js\n **/","const riskAPI = '/risk/v2/members/analyses'\n\nmodule.exports = {\n  all: {\n    method: 'get',\n    path: `${riskAPI}`,\n  },\n\n  byId: {\n    method: 'get',\n    path: `${riskAPI}/{analysisKey}`,\n  },\n\n  create: {\n    method: 'post',\n    path: `${riskAPI}`,\n  },\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./routes/risk/analysis.js\n **/","const riskAPI = '/risk/v2/members/analyses'\n\nmodule.exports = {\n  byId: {\n    method: 'get',\n    path: `${riskAPI}/{analysisKey}`,\n  },\n\n  create: {\n    method: 'post',\n    path: `${riskAPI}`,\n  },\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./routes/kyc-proxy/analysis.js\n **/","const pagarmeRecipientAdapter = require('./pagarme/recipient')\nconst pagarmeBankAccountAdapter = require('./pagarme/bank-account')\nconst pagarmeAddressAdapter = require('./pagarme/address')\nconst pagarmeRiskAnalysisAdapter = require('./pagarme/risk-analysis')\n\nmodule.exports = {\n  pagarme: {\n    address: pagarmeAddressAdapter,\n    bankAccount: pagarmeBankAccountAdapter,\n    recipient: pagarmeRecipientAdapter,\n    riskAnalysis: pagarmeRiskAnalysisAdapter,\n  },\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./adapters/index.js\n **/","const moment = require('moment')\nconst bankAccountAdapter = require('./bank-account')\nconst addressAdapter = require('./address')\nconst {\n  always,\n  anyPass,\n  applySpec,\n  complement,\n  evolve,\n  filter,\n  has,\n  ifElse,\n  isEmpty,\n  isNil,\n  of,\n  path,\n  pathEq,\n  pathSatisfies,\n  propEq,\n  pipe,\n  prop,\n  reject,\n  replace,\n  uniq,\n  __,\n} = require('ramda')\n\nconst isNotNil = complement(isNil)\nconst pathIsNotNil = pathSatisfies(isNotNil)\nconst hasTradingName = pathIsNotNil(['register_information', 'trading_name'])\n\nconst isIndividual = pathEq(['register_information', 'type'], 'individual')\n\nconst legalNameCompany = ifElse(\n  isIndividual,\n  path(['register_information', 'name']),\n  path(['register_information', 'company_name'])\n)\n\nconst tradeNameCompany = ifElse(\n  isIndividual,\n  path(['register_information', 'name']),\n  ifElse(\n    hasTradingName,\n    path(['register_information', 'trading_name']),\n    path(['register_information', 'company_name'])\n  )\n)\n\nconst legalName = ifElse(\n  has('register_information'),\n  legalNameCompany,\n  prop('legal_name')\n)\n\nconst tradeName = ifElse(\n  has('register_information'),\n  tradeNameCompany,\n  prop('legal_name')\n)\n\nconst documentTypeCode = ifElse(__, always(2), always(1))\n\nconst personCode = ifElse(\n  has('register_information'),\n  documentTypeCode(isIndividual),\n  documentTypeCode(propEq('document_type', 'cpf'))\n)\n\nconst taxId = ifElse(\n  has('register_information'),\n  path(['register_information', 'document_number']),\n  prop('document_number')\n)\n\nconst formatedBirthDate = register =>\n  moment(register.register_information.birthdate, 'DD/MM/YYYY')\n    .format('YYYY-MM-DD')\n\nconst birthdate = ifElse(\n  path(['register_information', 'birthdate']),\n  formatedBirthDate,\n  always(null)\n)\n\nconst bankAccounts = ifElse(\n  has('BankAccount'),\n  pipe(prop('BankAccount'), bankAccountAdapter, of),\n  always(null)\n)\n\nconst hasAddress = anyPass([\n  path(['register_information', 'address']),\n  path(['register_information', 'addresses']),\n  path(['register_information', 'main_address']),\n])\n\nconst getAddresses = (recipient) => {\n  let addressesArray = []\n\n  if (hasAddress(recipient)) {\n    const {\n      addresses = [],\n      address,\n      main_address,\n    } = recipient.register_information\n\n    if (isIndividual(recipient)) {\n      addressesArray.push(addressAdapter(address))\n    } else {\n      addressesArray = addresses.map(addressAdapter)\n      addressesArray.push(addressAdapter(main_address))\n    }\n  }\n\n  return uniq(addressesArray)\n}\n\nconst notEmpty = complement(isEmpty)\nconst filterNotNil = filter(isNotNil)\nconst filterNotEmpty = filter(notEmpty)\n\nconst maxLegalOrTradeNameLength = 100\nconst truncateName = name =>\n  name && name.substring(0, maxLegalOrTradeNameLength)\n\nconst recipient = applySpec({\n  legalName: pipe(legalName, truncateName),\n  tradeName: pipe(tradeName, truncateName),\n  taxId,\n  legalPersonalityId: personCode,\n  taxIdTypeId: personCode,\n  birthdate,\n  motherName: path(['register_information', 'mother_name']),\n  bankAccounts,\n  addresses: getAddresses,\n  websiteUrl: path(['register_information', 'site_url']),\n})\n\nconst rejectNullOrEmpty = reject(isNil)\n\nconst caduUnsafeCharsReg = /[\\\\|\\n]/g\nconst replaceUnsafeChars = replace(caduUnsafeCharsReg, '')\n\nconst parseRecipient = evolve({\n  legalName: replaceUnsafeChars,\n  tradeName: replaceUnsafeChars,\n})\n\nmodule.exports = pipe(\n  rejectNullOrEmpty,\n  recipient,\n  filterNotEmpty,\n  filterNotNil,\n  parseRecipient\n)\n\n\n\n/** WEBPACK FOOTER **\n ** ./adapters/pagarme/recipient.js\n **/","const {\n  applySpec,\n  prop,\n  propEq,\n  always,\n  ifElse,\n} = require('ramda')\n\nconst getAccountTypeId = ifElse(\n  propEq('type', 'conta_corrente'),\n  always(1),\n  always(2)\n)\n\nconst adapter = applySpec({\n  countryId: always(76),\n  bankId: prop('bank_code'),\n  branchCode: prop('agencia'),\n  branchCodeCheckDigit: prop('agencia_dv'),\n  accountNumber: prop('conta'),\n  accountNumberCheckDigit: prop('conta_dv'),\n  statusId: always(2),\n  accountTypeId: getAccountTypeId,\n})\n\nmodule.exports = adapter\n\n\n\n/** WEBPACK FOOTER **\n ** ./adapters/pagarme/bank-account.js\n **/","const {\n  always,\n  anyPass,\n  applySpec,\n  is,\n  isEmpty,\n  isNil,\n  pipe,\n  prop,\n  slice,\n  trim,\n  when,\n} = require('ramda')\n\nconst isString = is(String)\n\nconst propAndTrim = propName => pipe(\n  prop(propName),\n  when(isString, trim)\n)\n\nconst complement = pipe(\n  propAndTrim('complementary'),\n  when(isString, slice(0, 63))\n)\n\nconst isEmptyOrNil = anyPass([isEmpty, isNil])\nconst emptyStreetNumber = always('SN')\n\nconst entranceNumber = pipe(\n  propAndTrim('street_number'),\n  when(isEmptyOrNil, emptyStreetNumber)\n)\n\nconst adapter = applySpec({\n  typeId: always(2),\n  streetName: propAndTrim('street'),\n  entranceNumber,\n  neighborhood: propAndTrim('neighborhood'),\n  postalCode: propAndTrim('zipcode'),\n  complement,\n  cityName: propAndTrim('city'),\n  countrySubdivisionCode: propAndTrim('state'),\n  countryId: always(76),\n})\n\nmodule.exports = adapter\n\n\n\n/** WEBPACK FOOTER **\n ** ./adapters/pagarme/address.js\n **/","const recipientAdapter = require('./recipient')\nconst {\n  always,\n  applySpec,\n  assoc,\n  cond,\n  has,\n  of,\n  pathEq,\n  pipe,\n  prop,\n  propOr,\n  T,\n} = require('ramda')\n\nconst isIndividual = pathEq(['recipient', 'document_type'], 'cpf')\n\nconst getPolicyId = cond([\n  [has('policyId'), prop('policyId')],\n  [isIndividual, always(6)],\n  [T, always(5)],\n])\n\nconst createPolicy = applySpec({\n  id: getPolicyId,\n  forceReanalysis: propOr(false, 'forceReanalysis'),\n})\n\nconst serviceAgreements = [{\n  products: [{\n    id: 5, // Conta de Pagamento\n    providerId: 5, // Pagar.me\n  }],\n}]\n\nconst addServiceAgreements = assoc('serviceAgreements', serviceAgreements)\n\nconst policies = pipe(createPolicy, of)\n\nconst adapter = applySpec({\n  policies,\n  member: pipe(\n    prop('recipient'),\n    recipientAdapter,\n    addServiceAgreements\n  ),\n})\n\nmodule.exports = adapter\n\n\n\n/** WEBPACK FOOTER **\n ** ./adapters/pagarme/risk-analysis.js\n **/","const { pluck, isNil } = require('ramda')\nconst Joi = require('joi')\n\nconst configSchema = Joi.object().keys({\n  secret: Joi.string().required(),\n  environment: Joi.string().required().valid(['live', 'sandbox']),\n  clientApplicationKey: Joi.string().required(),\n  userIdentifier: Joi.string().required(),\n}).required()\n\nconst connectConfigSchema = Joi.object().keys({\n  environment: Joi.string().required().valid(['live', 'sandbox', 'test']),\n  privateKey: Joi.object().required(),\n  clientId: Joi.string().required(),\n  userAgent: Joi.string().required(),\n}).required()\n\nconst validateConfig = (config) => {\n  const result = Joi.validate(config, configSchema)\n\n  if (!isNil(result.error)) {\n    throw new Error(pluck('message', result.error.details))\n  }\n}\n\nconst validateConnectConfig = (config) => {\n  const result = Joi.validate(config, connectConfigSchema)\n\n  if (!isNil(result.error)) {\n    throw new Error(pluck('message', result.error.details))\n  }\n}\n\nmodule.exports = {\n  validateConfig,\n  validateConnectConfig,\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./validations/client.js\n **/","module.exports = require(\"joi\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"joi\"\n ** module id = 29\n ** module chunks = 0\n **/","module.exports = require(\"bluebird\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"bluebird\"\n ** module id = 30\n ** module chunks = 0\n **/"],"sourceRoot":""}